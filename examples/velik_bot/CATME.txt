build for docker-compose
  $ docker build -t 2.7-alpine-build-base .
dev$ rake -T
  rake backup
  rake test
test via docker
  $ docker-compose run -v $(pwd)/test.rb:/usr/src/app/test.rb:ro -v $(pwd)/pevko.htm:/usr/src/app/pevko.htm:ro -v $(pwd)/slick.htm:/usr/src/app/slick.htm:ro -v $(pwd)/cat.htm:/usr/src/app/cat.htm:ro velik_bot sh -c "gem update bundler && bundle install && bundle exec ruby test.rb"
deploy
  $ git clone https://github.com/Nakilon/nakiircbot.git
  $ cd nakiircbot/examples/velik_bot
  dev$ scp tokens.secret velik:_/nakiircbot/examples/velik_bot/
  dev$ scp clientid.secret velik:_/nakiircbot/examples/velik_bot/
  dev$ scp secret.secret velik:_/nakiircbot/examples/velik_bot/
  dev$ scp ru.json velik:_/nakiircbot/examples/velik_bot/
  dev$ scp items.json velik:_/nakiircbot/examples/velik_bot/
  dev$ scp cfg.yaml velik:_/nakiircbot/examples/velik_bot/
  dev$ scp bu.quotes.yaml velik:_/nakiircbot/examples/velik_bot/
  dev$ scp gpt.secret velik:_/nakiircbot/examples/velik_bot/
  dev$ scp bu.repdb.yaml velik:_/nakiircbot/examples/velik_bot/prod.repdb.yaml
  dev$ scp bu.dynamic.cfg.yaml velik:_/nakiircbot/examples/velik_bot/dynamic.cfg.yaml
  dev$ scp lastfm.secret velik:_/nakiircbot/examples/velik_bot/
  # $ mkdir logs
  $ docker-compose up -d
see remote logs
  dev$ ssh velik docker logs --since=5m -f velik_bot
chat AI CLI
  $ bundle exec ruby -r./common -e "Common.chatai 'hello'"
redeploy
  dev$ ssh velik
  $ cd _/nakiircbot/examples/velik_bot
  $ git pull
  $ docker-compose down && docker-compose up -d
  $ exit
  dev$ ssh velik docker logs -f velik_bot
update rep dump
  $ bundle exec ruby -r./common -raws-upload -e "Common.init_repdb 'bu'; NakiCommon.aws_upload JSON.dump([Time.now.strftime('%F'), Common.rep_chart('#korolikarasi').group_by(&:last).transform_values{ |_| _.map &:first }.sort]), \"velik-bot-rep.nakilon.su/#{Common.login_to_id 'korolikarasi'}.json\", File.read('access_key.aws.secret'), File.read('secret_access_key.aws.secret')"




